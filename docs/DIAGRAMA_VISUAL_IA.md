# ğŸ“Š Diagrama Visual: Como a IA Funciona no KCS Formatter

**VersÃ£o**: 3.0.5  
**Documento**: Visual Quick Reference

---

## ğŸ”„ Fluxo Completo (Visual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USUÃRIO FINAL                               â”‚
â”‚                    (VocÃª/Isabelly)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Digita texto e clica
                       â”‚ "Formatar com IA"
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (renderer.js)                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. COLETA TEXTO                                               â”‚  â”‚
â”‚  â”‚    â€¢ Editor Quill                                             â”‚  â”‚
â”‚  â”‚    â€¢ Ou campos do formulÃ¡rio                                  â”‚  â”‚
â”‚  â”‚    â€¢ Texto bruto (pode estar desordenado)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. ENVIA PARA BACKEND VIA IPC                                 â”‚  â”‚
â”‚  â”‚    â€¢ Canal: 'ask-ai'                                          â”‚  â”‚
â”‚  â”‚    â€¢ Dados: texto bruto                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ IPC Message
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BACKEND (main.js:510)                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3. PRÃ‰-PROCESSAMENTO                                          â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  a) smartParseContent()                                       â”‚  â”‚
â”‚  â”‚     â€¢ Detecta: nÃºmeros? bullets? verbos?                      â”‚  â”‚
â”‚  â”‚     â€¢ Output: Texto estruturado                               â”‚  â”‚
â”‚  â”‚     â€¢ Exemplo: "como fazer X? 1.a 2.b" â†’ "1. a\n2. b"       â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  b) detectarModulo()                                          â”‚  â”‚
â”‚  â”‚     â€¢ Busca: "faturamento", "estoque", etc                    â”‚  â”‚
â”‚  â”‚     â€¢ Output: "Faturamento"                                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  c) gerarTags()                                               â”‚  â”‚
â”‚  â”‚     â€¢ Frequency analysis                                      â”‚  â”‚
â”‚  â”‚     â€¢ Remove stop words (em portuguÃªs)                        â”‚  â”‚
â”‚  â”‚     â€¢ Output: ["tag1", "tag2", ...]                          â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  d) extrairUrls()                                             â”‚  â”‚
â”‚  â”‚     â€¢ Regex para detectar https://...                         â”‚  â”‚
â”‚  â”‚     â€¢ ValidaÃ§Ã£o com URL()                                     â”‚  â”‚
â”‚  â”‚     â€¢ Output: ["url1", "url2", ...]                          â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  e) medirQualidadeConteudo()                                  â”‚  â”‚
â”‚  â”‚     â€¢ Score: 0-100%                                           â”‚  â”‚
â”‚  â”‚     â€¢ Feedback: "Bom conteÃºdo", "Muito curto", etc           â”‚  â”‚
â”‚  â”‚     â€¢ Output: {score, feedback}                               â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 4. MONTAR PROMPT ESTRUTURADO                                  â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    VocÃª Ã© um assistente tÃ©cnico...                            â”‚  â”‚
â”‚  â”‚    Retorne JSON com: title, module, description,              â”‚  â”‚
â”‚  â”‚    cause, solution[], links[], tags[]                         â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    MÃ³dulo detectado: [Faturamento]                            â”‚  â”‚
â”‚  â”‚    Tags sugeridas: [tag1, tag2, ...]                         â”‚  â”‚
â”‚  â”‚    URLs encontradas: [url1, url2, ...]                       â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    ConteÃºdo: [seu texto estruturado]                          â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 5. CHAMAR COPILOT OU OPENAI                                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    const completion = await openai.chat.completions.create({  â”‚  â”‚
â”‚  â”‚      model: 'gpt-4o-mini',                                    â”‚  â”‚
â”‚  â”‚      messages: [system, user],                                â”‚  â”‚
â”‚  â”‚      temperature: 0.15                                        â”‚  â”‚
â”‚  â”‚    });                                                         â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    â€¢ Qual provider? (verificar .env)                          â”‚  â”‚
â”‚  â”‚      â”œâ”€ Se COPILOT_API_KEY â†’ Copilot                         â”‚  â”‚
â”‚  â”‚      â””â”€ Se OPENAI_API_KEY â†’ OpenAI                           â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â”‚ Aguarda ~2-5 segundos                         â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 6. RECEBE RESPOSTA DA IA                                      â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    {                                                           â”‚  â”‚
â”‚  â”‚      "title": "Linx Microvix - MÃ³dulo - Como ...",           â”‚  â”‚
â”‚  â”‚      "module": "Faturamento",                                 â”‚  â”‚
â”‚  â”‚      "description": "Para ..., realize:",                     â”‚  â”‚
â”‚  â”‚      "cause": "...",                                          â”‚  â”‚
â”‚  â”‚      "solution": ["passo 1", "passo 1.1", "passo 2"],        â”‚  â”‚
â”‚  â”‚      "links": ["https://..."],                                â”‚  â”‚
â”‚  â”‚      "tags": ["tag1", "tag2", ...]                           â”‚  â”‚
â”‚  â”‚    }                                                           â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7. VALIDA COM validateKCS()                                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    Regras:                                                    â”‚  â”‚
â”‚  â”‚    â€¢ title: â‰¤200 chars, padrÃ£o "Linx Microvix - ..."         â”‚  â”‚
â”‚  â”‚    â€¢ module: em lista de 16 mÃ³dulos vÃ¡lidos                  â”‚  â”‚
â”‚  â”‚    â€¢ description: 10-500 chars, comeÃ§a com "Para"            â”‚  â”‚
â”‚  â”‚    â€¢ solution: â‰¥1 item, â‰¤1000 chars cada                     â”‚  â”‚
â”‚  â”‚    â€¢ links: â‰¤5 URLs, validadas                               â”‚  â”‚
â”‚  â”‚    â€¢ tags: â‰¤6, lowercase                                     â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    Retorno: {valid, errors[], warnings[], data}              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                  VÃ¡lido?                                             â”‚
â”‚               /        \                                             â”‚
â”‚              /          \                                            â”‚
â”‚          SIM/           \NÃƒO                                          â”‚
â”‚           â”‚              â”‚                                           â”‚
â”‚           â”‚              â–¼                                           â”‚
â”‚           â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚           â”‚      â”‚ 8. TENTAR AUTO-CORRIGIR              â”‚           â”‚
â”‚           â”‚      â”‚    fixKCSJson()                      â”‚           â”‚
â”‚           â”‚      â”‚    â€¢ Trim/Normalize                  â”‚           â”‚
â”‚           â”‚      â”‚    â€¢ Fixar padrÃ£o title              â”‚           â”‚
â”‚           â”‚      â”‚    â€¢ Capitalizar module              â”‚           â”‚
â”‚           â”‚      â”‚    â€¢ Etc...                          â”‚           â”‚
â”‚           â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚                 â”‚                                        â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 9. RETORNAR RESPOSTA ESTRUTURADA                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚    {                                                           â”‚  â”‚
â”‚  â”‚      success: true/false,                                     â”‚  â”‚
â”‚  â”‚      data: {...},          // JSON validado                   â”‚  â”‚
â”‚  â”‚      errors: [...],        // Erros encontrados               â”‚  â”‚
â”‚  â”‚      warnings: [...],      // Avisos                          â”‚  â”‚
â”‚  â”‚      qualidade: {...},     // Score e feedback                â”‚  â”‚
â”‚  â”‚      raw: "..."            // JSON original da IA             â”‚  â”‚
â”‚  â”‚    }                                                           â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ IPC Response
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (renderer.js:520)                        â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 10. PROCESSAR RESPOSTA                                        â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â€¢ parseAIResponse()                                          â”‚  â”‚
â”‚  â”‚  â€¢ Transformar dados em campo/valor                          â”‚  â”‚
â”‚  â”‚  â€¢ Estruturado? Sim â†’ usar diretamente                        â”‚  â”‚
â”‚  â”‚  â€¢ Estruturado? NÃ£o â†’ fazer parse legado                     â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 11. PREENCHER FORMULÃRIO                                      â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  document.getElementById('title').value = parsed.title;       â”‚  â”‚
â”‚  â”‚  document.getElementById('module').value = parsed.module;     â”‚  â”‚
â”‚  â”‚  document.getElementById('desc').value = parsed.description;  â”‚  â”‚
â”‚  â”‚  // ... e mais campos                                         â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 12. ATUALIZAR PREVIEW                                         â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â€¢ HTML formatado com dados                                  â”‚  â”‚
â”‚  â”‚  â€¢ Mostra como ficarÃ¡ o artigo final                         â”‚  â”‚
â”‚  â”‚  â€¢ UsuÃ¡rio pode editar se precisar                           â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â”‚                       â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 13. LOG NO CONSOLE (DevTools - F12)                          â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  âœ… Sucesso:      "âœ… ValidaÃ§Ã£o KCS: APROVADO"               â”‚  â”‚
â”‚  â”‚  âŒ Erros:        "âŒ Erros: [lista]"                         â”‚  â”‚
â”‚  â”‚  âš ï¸  Avisos:      "âš ï¸ Avisos: [lista]"                        â”‚  â”‚
â”‚  â”‚  ğŸ“Š Qualidade:   "ğŸ“Š Score: 85%"                             â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USUÃRIO VÃŠ                                     â”‚
â”‚  â€¢ FormulÃ¡rio preenchido com dados da IA                            â”‚
â”‚  â€¢ Preview do artigo formatado                                      â”‚
â”‚  â€¢ Console com log de validaÃ§Ã£o (se abrir F12)                      â”‚
â”‚  â€¢ Pode editar se precisar                                          â”‚
â”‚  â€¢ Pode clicar "Salvar" ou "Copiar"                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Componentes Envolvidos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FILES DO PROJETO                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ src/main.js                    (1016 linhas)     â”‚
â”‚  â”œâ”€ ipcMain.handle('ask-ai')                    â”‚
â”‚  â”œâ”€ smartParseContent()                         â”‚
â”‚  â””â”€ InicializaÃ§Ã£o OpenAI/Copilot                â”‚
â”‚                                                  â”‚
â”‚ src/renderer.js                (838 linhas)      â”‚
â”‚  â”œâ”€ formatWithAIBtn.addEventListener()          â”‚
â”‚  â”œâ”€ window.electronAPI.askAI()                  â”‚
â”‚  â””â”€ parseAIResponse()                           â”‚
â”‚                                                  â”‚
â”‚ src/kcs-helpers.js             (244 linhas)      â”‚
â”‚  â”œâ”€ detectarModulo()                            â”‚
â”‚  â”œâ”€ gerarTags()                                 â”‚
â”‚  â”œâ”€ extrairUrls()                               â”‚
â”‚  â””â”€ medirQualidadeConteudo()                    â”‚
â”‚                                                  â”‚
â”‚ src/kcs-validator.js           (296 linhas)      â”‚
â”‚  â”œâ”€ validateKCS()                               â”‚
â”‚  â”œâ”€ fixKCSJson()                                â”‚
â”‚  â””â”€ formatKCSForDisplay()                       â”‚
â”‚                                                  â”‚
â”‚ src/.env                       (FALTA CRIAR!)    â”‚
â”‚  â”œâ”€ COPILOT_API_KEY                             â”‚
â”‚  â””â”€ COPILOT_ENDPOINT                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Dados Fluem Assim

```
USUÃRIO DIGITA
    â†“
TEXTO BRUTO (desordenado)
    â†“
smartParseContent() â†’ TEXTO ESTRUTURADO
    â†“
detectarModulo() â†’ MÃ“DULO IDENTIFICADO
    â†“
gerarTags() â†’ TAGS SUGERIDAS
    â†“
extrairUrls() â†’ URLS EXTRAÃDAS
    â†“
medirQualidadeConteudo() â†’ SCORE 0-100
    â†“
PROMPT MONTADO (texto estruturado + contexto)
    â†“
COPILOT/OPENAI
    â†“
JSON COM CAMPOS KCS (tÃ­tulo, mÃ³dulo, descriÃ§Ã£o, etc)
    â†“
validateKCS() â†’ VALIDAÃ‡ÃƒO
    â†“
fixKCSJson() â†’ AUTO-CORREÃ‡ÃƒO (se necessÃ¡rio)
    â†“
DADOS ESTRUTURADOS VALIDADOS
    â†“
FRONTEND PREENCHE FORMULÃRIO
    â†“
PREVIEW ATUALIZADO
    â†“
USUÃRIO VÃŠ RESULTADO
```

---

## ğŸ“‹ O que Falta (3 Itens)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ITEM 1: Arquivo .env                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LocalizaÃ§Ã£o: src/.env                              â”‚
â”‚ Status: âŒ NÃ£o existe                              â”‚
â”‚ AÃ§Ã£o: CRIAR arquivo e adicionar token             â”‚
â”‚ Tempo: 2 minutos                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ITEM 2: Token Copilot                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LocalizaÃ§Ã£o: .env â†’ COPILOT_API_KEY                â”‚
â”‚ Status: âŒ Ainda nÃ£o obteve                        â”‚
â”‚ AÃ§Ã£o: CONTACTAR TI da empresa                      â”‚
â”‚ Tempo: 5 minutos (depende de TI)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ITEM 3: Teste PrÃ¡tico                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ O que fazer: npm start + digit + clique            â”‚
â”‚ Status: â³ Aguardando items 1 e 2                  â”‚
â”‚ Tempo: 3 minutos                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… O Que JÃ¡ Funciona (12 Componentes)

```
[âœ…] Interface UI
    â””â”€ BotÃ£o "Formatar com IA" pronto

[âœ…] Editor Quill
    â””â”€ Coleta texto do usuÃ¡rio

[âœ…] IPC Channel
    â””â”€ ComunicaÃ§Ã£o Frontend â†” Backend

[âœ…] OpenAI/Copilot Client
    â””â”€ Cliente inicializado

[âœ…] Copilot Support
    â””â”€ Suporta baseURL customizado

[âœ…] Parser Inteligente
    â””â”€ smartParseContent() funciona

[âœ…] DetecÃ§Ã£o MÃ³dulo
    â””â”€ 10 mÃ³dulos suportados

[âœ…] GeraÃ§Ã£o Tags
    â””â”€ Frequency-based + stop words

[âœ…] ExtraÃ§Ã£o URLs
    â””â”€ Regex + validaÃ§Ã£o

[âœ…] Quality Score
    â””â”€ Score 0-100 funcionando

[âœ…] ValidaÃ§Ã£o KCS
    â””â”€ Valida todos os campos

[âœ…] Auto-CorreÃ§Ã£o
    â””â”€ fixKCSJson() implementado
```

---

## ğŸ¬ Resumo: Um Clique = Tudo Pronto

```
ANTES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UsuÃ¡rio clica       â”‚
â”‚ "Formatar com IA"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â³ AGUARDANDO...
    (cÃ³digo checando .env)
             â”‚
             â–¼
    âŒ "Nenhuma chave IA"
    (porque .env falta)


DEPOIS (quando .env estiver):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UsuÃ¡rio clica       â”‚
â”‚ "Formatar com IA"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ 2-5 segundos
             â–¼
    ğŸ“¤ Enviando para IA
    ğŸ“Š Analisando conteÃºdo
    ğŸ“¥ Recebendo resposta
    âœ… Validando JSON
    ğŸ“ Preenchendo campos
             â”‚
             â–¼
    âœ¨ PRONTO! âœ¨
    â€¢ TÃ­tulo preenchido
    â€¢ MÃ³dulo detectado
    â€¢ DescriÃ§Ã£o formatada
    â€¢ Passos estruturados
    â€¢ Tags geradas
    â€¢ URLs extraÃ­das
```

---

## ğŸš€ Timeline de Setup

```
1. OBT TOKEN COPILOT
   â”œâ”€ Contactar TI
   â””â”€ Receber token (ghp_...)
   
   Tempo: 5 min (depende de TI)

2. CRIAR ARQUIVO .env
   â”œâ”€ PowerShell: New-Item src\.env
   â””â”€ Adicionar token
   
   Tempo: 2 min

3. REINICIAR APP
   â”œâ”€ Ctrl+C (para aplicaÃ§Ã£o)
   â”œâ”€ npm start (reinicia)
   â””â”€ Verificar console
   
   Tempo: 1 min

4. TESTAR
   â”œâ”€ Digitar texto
   â”œâ”€ Clicar "Formatar com IA"
   â””â”€ Monitorar console (F12)
   
   Tempo: 3 min

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL: ~15 minutos
```

---

**VersÃ£o**: 3.0.5  
**PropÃ³sito**: ReferÃªncia Visual  
**PÃºblico**: VocÃª + Isabelly + Equipe
